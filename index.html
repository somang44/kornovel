<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>K-–ù–æ–≤–µ–ª–ª—ã</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
:root{
  --bg:#f6f7fb;
  --card:#ffffff;
  --text:#111;
  --muted:#6b7280;
  --accent:#e56a84;
  --border:#e5e7eb;
}
body.dark{
  --bg:#0f1115;
  --card:#161a22;
  --text:#f3f4f6;
  --muted:#9ca3af;
  --border:#262b36;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui, sans-serif;
  background:var(--bg);
  color:var(--text);
}
header{
  padding:14px;
  font-weight:800;
  display:flex;
  justify-content:space-between;
}
button{
  border:none;
  background:var(--accent);
  color:white;
  padding:8px 12px;
  border-radius:10px;
  cursor:pointer;
}
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px;
  margin:14px;
}
.hidden{display:none}
.novel{cursor:pointer}
.chapter.locked{opacity:.5}
.bottom{
  position:fixed;bottom:0;left:0;right:0;
  background:var(--card);
  display:flex;
  justify-content:space-around;
  border-top:1px solid var(--border);
}
.tab{padding:10px;font-size:13px;cursor:pointer}
</style>
</head>

<body>

<header>
  <div>K-–ù–æ–≤–µ–ª–ª—ã</div>
  <button onclick="toggleTheme()">üåó</button>
</header>

<!-- –ë–ò–ë–õ–ò–û–¢–ï–ö–ê -->
<div id="library">
  <div class="card novel" onclick="openNovel('n1')">
    <b>–ù–æ–≤–µ–ª–ª–∞ 1</b><br>
    –†–æ–º–∞–Ω—Ç–∏–∫–∞ ¬∑ 5 –≥–ª–∞–≤
  </div>
  <div class="card novel" onclick="openNovel('n2')">
    <b>–ù–æ–≤–µ–ª–ª–∞ 2</b><br>
    –§—ç–Ω—Ç–µ–∑–∏ ¬∑ 3 –≥–ª–∞–≤—ã
  </div>
</div>

<!-- –°–¢–†–ê–ù–ò–¶–ê –ù–û–í–ï–õ–õ–´ -->
<div id="novelPage" class="hidden">
  <div class="card">
    <h2 id="novelTitle"></h2>
    <p id="novelDesc"></p>
    <div id="chapters"></div>
  </div>
</div>

<!-- –ß–ò–¢–ê–õ–ö–ê -->
<div id="reader" class="hidden">
  <div class="card">
    <h2 id="chapterTitle"></h2>
    <p id="chapterText"></p>
  </div>
</div>

<!-- –ü–†–û–§–ò–õ–¨ -->
<div id="profile" class="hidden">
  <div class="card">
    <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
    <p>–ü—Ä–æ—á–∏—Ç–∞–Ω–æ –≥–ª–∞–≤: <b id="statRead">0</b></p>
    <p>–õ–∞–π–∫–æ–≤: <b id="statLikes">0</b></p>
  </div>
</div>

<!-- –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ -->
<div class="bottom">
  <div class="tab" onclick="show('library')">üìö</div>
  <div class="tab" onclick="show('profile')">üë§</div>
</div>

<script>
const tg = window.Telegram?.WebApp;
tg?.expand();

const DATA = {
  n1:{
    title:"–ù–æ–≤–µ–ª–ª–∞ 1",
    desc:"–û–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–π –Ω–æ–≤–µ–ª–ª—ã",
    chapters:[
      {title:"–ì–ª–∞–≤–∞ 1", text:"–¢–µ–∫—Å—Ç –≥–ª–∞–≤—ã 1", paid:false},
      {title:"–ì–ª–∞–≤–∞ 2", text:"–¢–µ–∫—Å—Ç –≥–ª–∞–≤—ã 2", paid:false},
      {title:"–ì–ª–∞–≤–∞ 3", text:"–ü–ª–∞—Ç–Ω–∞—è –≥–ª–∞–≤–∞", paid:true}
    ]
  },
  n2:{
    title:"–ù–æ–≤–µ–ª–ª–∞ 2",
    desc:"–§—ç–Ω—Ç–µ–∑–∏ –∏—Å—Ç–æ—Ä–∏—è",
    chapters:[
      {title:"–ì–ª–∞–≤–∞ 1", text:"–¢–µ–∫—Å—Ç", paid:false}
    ]
  }
};

let readCount = Number(localStorage.getItem("read")||0);
let likes = Number(localStorage.getItem("likes")||0);

function show(id){
  ["library","novelPage","reader","profile"].forEach(x=>{
    document.getElementById(x).classList.add("hidden");
  });
  document.getElementById(id).classList.remove("hidden");
  document.getElementById("statRead").textContent = readCount;
  document.getElementById("statLikes").textContent = likes;
}

function openNovel(id){
  const n = DATA[id];
  show("novelPage");
  novelTitle.textContent = n.title;
  novelDesc.textContent = n.desc;
  chapters.innerHTML = "";
  n.chapters.forEach((c,i)=>{
    const div = document.createElement("div");
    div.className="chapter"+(c.paid?" locked":"");
    div.innerHTML = c.title + (c.paid?" üîí":"");
    div.onclick=()=>openChapter(id,i);
    chapters.appendChild(div);
  });
}

function openChapter(novelId,i){
  const ch = DATA[novelId].chapters[i];
  if(ch.paid){
    alert("–ó–¥–µ—Å—å –±—É–¥–µ—Ç Telegram Payments üí≥");
    return;
  }
  show("reader");
  chapterTitle.textContent = ch.title;
  chapterText.textContent = ch.text;
  readCount++;
  localStorage.setItem("read",readCount);
}

function toggleTheme(){
  document.body.classList.toggle("dark");
}
</script>

</body>
</html>
